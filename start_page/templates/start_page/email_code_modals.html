{# Универсальные модалки для всех сценариев (password_reset / signup / change_email) #}

<!-- Модалка 1: ввод email -->
<div id="pr-modal-email" class="pr-modal" style="display: none;">
    <div class="pr-modal-content">
        <h2>Подтверждение email</h2>
        <p>Введите ваш email, на него будет отправлен код.</p>
        <form id="pr-email-form">
            {% csrf_token %}
            <input type="email" name="email" id="pr-email-input" placeholder="Email">
            <div id="pr-email-error" class="pr-error"></div>
            <button type="submit">Отправить код</button>
            <button type="button" id="pr-email-cancel">Отмена</button>
        </form>
    </div>
</div>

<!-- Модалка 2: ввод кода -->
<div id="pr-modal-code" class="pr-modal" style="display: none;">
    <div class="pr-modal-content">
        <h2>Введите код</h2>
        <p>Мы отправили шестизначный код на вашу почту.</p>
        <form id="pr-code-form">
            {% csrf_token %}
            <input type="text" name="code" id="pr-code-input" placeholder="Код из письма">
            <div id="pr-code-error" class="pr-error"></div>
            <button type="submit">Проверить код</button>
            <button type="button" id="pr-code-cancel">Отмена</button>
        </form>

        <div class="pr-resend-block">
            <button type="button" id="pr-code-resend">Запросить код повторно</button>
            <div id="pr-code-timer" class="pr-timer"></div>
        </div>
    </div>
</div>

<!-- Модалка 3: пароль / текущий пароль -->
<div id="pr-modal-password" class="pr-modal" style="display: none;">
    <div class="pr-modal-content">
        <h2 id="pr-password-title">Новый пароль</h2>
        <form id="pr-password-form">
            {% csrf_token %}
            <input type="password" name="password1" id="pr-password1" placeholder="Новый пароль">
            <input type="password" name="password2" id="pr-password2" placeholder="Повторите пароль">
            <div id="pr-password-error" class="pr-error"></div>
            <button type="submit">Сохранить</button>
            <button type="button" id="pr-password-cancel">Отмена</button>
        </form>
    </div>
</div>

<!-- Оверлей загрузки -->
<div id="pr-loading-overlay" class="pr-loading-overlay" style="display: none;">
    <div class="pr-loading-box">
        <div class="pr-spinner"></div>
        <div id="pr-loading-text" class="pr-loading-text">Отправляем код...</div>
    </div>
</div>

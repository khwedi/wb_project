{% load static %}

<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Log in</title>
    <link rel="stylesheet" href="{% static 'start_page/styles.css' %}">
    <link rel="stylesheet" href="{% static 'start_page/email_code.css' %}">
</head>
<body>
<h1>Авторизация</h1>

<form method="post" id="login-form">
    {% csrf_token %}

    <div class="{% if form.email.errors %}field-error{% endif %}">
        {{ form.email.label_tag }}<br>
        {{ form.email }}<br>
        {{ form.email.errors }}
    </div>

    <div class="{% if form.password.errors %}field-error{% endif %}">
        {{ form.password.label_tag }}<br>
        {{ form.password }}<br>
        {{ form.password.errors }}
    </div>

    {% if form.non_field_errors %}
        <ul class="errorlist">
            {% for error in form.non_field_errors %}
                <li>{{ error }}</li>
            {% endfor %}
        </ul>
    {% endif %}

    <button type="submit">Log in</button>
</form>

<p>
    Нет аккаунта?
    <a href="{% url 'start_page:signup' %}">Зарегистрироваться</a>
</p>

<p>
    Забыли пароль?
    <button type="button" id="password-reset-btn">Сменить пароль</button>
</p>

<p id="password-reset-success" class="success-message"></p>

<p><a href="{% url 'start_page:start_page' %}">На стартовую</a></p>

{# универсальные модалки email-кода #}
{% include "start_page/email_code_modals.html" %}

<script>
    window.EC_CONFIG = {
        mode: "password_reset",
        triggerId: "password-reset-btn"
    };
</script>
<script src="{% static 'start_page/email_code.js' %}"></script>
</body>
</html>
